parameter (or (pair %store_distances_info (string %distance) (pair (string %staX) (string %staY))) (pair %store_network_info (map %network_info string string) (pair (string %station_name) (string %timestamp))));
storage   (pair (map %distances (pair (string %staX) (string %staY)) string) (pair (map %latest_infor string (map string (map string string))) (map %timestamps string (map string (map string (map string string))))));
code
  {
    UNPAIR;     # @parameter : @storage
    IF_LEFT
      {
        # == store_distances_info ==
        # self.data.distances = sp.update_map( # @parameter%store_distances_info : @storage
        DUP 2;      # @storage : @parameter%store_distances_info : @storage
        CAR;        # map (pair (string %staX) (string %staY)) string : @parameter%store_distances_info : @storage
        DUP 2;      # @parameter%store_distances_info : map (pair (string %staX) (string %staY)) string : @parameter%store_distances_info : @storage
        CAR;        # string : map (pair (string %staX) (string %staY)) string : @parameter%store_distances_info : @storage
        SOME;       # option string : map (pair (string %staX) (string %staY)) string : @parameter%store_distances_info : @storage
        DIG 2;      # @parameter%store_distances_info : option string : map (pair (string %staX) (string %staY)) string : @storage
        DUP;        # @parameter%store_distances_info : @parameter%store_distances_info : option string : map (pair (string %staX) (string %staY)) string : @storage
        GET 4;      # string : @parameter%store_distances_info : option string : map (pair (string %staX) (string %staY)) string : @storage
        SWAP;       # @parameter%store_distances_info : string : option string : map (pair (string %staX) (string %staY)) string : @storage
        GET 3;      # string : string : option string : map (pair (string %staX) (string %staY)) string : @storage
        PAIR;       # pair string string : option string : map (pair (string %staX) (string %staY)) string : @storage
        UPDATE;     # map (pair string string) string : @storage
        UPDATE 1;   # @storage
      }
      {
        # == store_network_info ==
        # timestamp = params.timestamp # @parameter%store_network_info : @storage
        DUP;        # @parameter%store_network_info : @parameter%store_network_info : @storage
        GET 4;      # string : @parameter%store_network_info : @storage
        # station_name = params.station_name # string : @parameter%store_network_info : @storage
        DUP 2;      # @parameter%store_network_info : string : @parameter%store_network_info : @storage
        GET 3;      # string : string : @parameter%store_network_info : @storage
        # if self.data.timestamps.contains(timestamp): # string : string : @parameter%store_network_info : @storage
        DUP 4;      # @storage : string : string : @parameter%store_network_info : @storage
        GET 4;      # map string (map string (map string (map string string))) : string : string : @parameter%store_network_info : @storage
        DUP 3;      # string : map string (map string (map string (map string string))) : string : string : @parameter%store_network_info : @storage
        MEM;        # bool : string : string : @parameter%store_network_info : @storage
        IF
          {
            # self.data.timestamps[timestamp][station_name] = { # string : string : @parameter%store_network_info : @storage
            DIG 3;      # @storage : string : string : @parameter%store_network_info
            DUP;        # @storage : @storage : string : string : @parameter%store_network_info
            GET 4;      # map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            DUP;        # map string (map string (map string (map string string))) : map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            DIG 4;      # string : map string (map string (map string (map string string))) : map string (map string (map string (map string string))) : @storage : string : @parameter%store_network_info
            DUP;        # string : string : map string (map string (map string (map string string))) : map string (map string (map string (map string string))) : @storage : string : @parameter%store_network_info
            DUG 2;      # string : map string (map string (map string (map string string))) : string : map string (map string (map string (map string string))) : @storage : string : @parameter%store_network_info
            GET;        # option (map string (map string (map string string))) : string : map string (map string (map string (map string string))) : @storage : string : @parameter%store_network_info
            IF_NONE
              {
                PUSH int 34; # int : string : map string (map string (map string (map string string))) : @storage : string : @parameter%store_network_info
                FAILWITH;   # FAILED
              }
              {}; # @some : string : map string (map string (map string (map string string))) : @storage : string : @parameter%store_network_info
            EMPTY_MAP string (map string string); # map string (map string string) : @some : string : map string (map string (map string (map string string))) : @storage : string : @parameter%store_network_info
            DIG 6;      # @parameter%store_network_info : map string (map string string) : @some : string : map string (map string (map string (map string string))) : @storage : string
            CAR;        # map string string : map string (map string string) : @some : string : map string (map string (map string (map string string))) : @storage : string
            SOME;       # option (map string string) : map string (map string string) : @some : string : map string (map string (map string (map string string))) : @storage : string
            PUSH string "network_info"; # string : option (map string string) : map string (map string string) : @some : string : map string (map string (map string (map string string))) : @storage : string
            UPDATE;     # map string (map string string) : @some : string : map string (map string (map string (map string string))) : @storage : string
            SOME;       # option (map string (map string string)) : @some : string : map string (map string (map string (map string string))) : @storage : string
            DIG 5;      # string : option (map string (map string string)) : @some : string : map string (map string (map string (map string string))) : @storage
            UPDATE;     # map string (map string (map string string)) : string : map string (map string (map string (map string string))) : @storage
            SOME;       # option (map string (map string (map string string))) : string : map string (map string (map string (map string string))) : @storage
            SWAP;       # string : option (map string (map string (map string string))) : map string (map string (map string (map string string))) : @storage
            UPDATE;     # map string (map string (map string (map string string))) : @storage
            UPDATE 4;   # @storage
          }
          {
            # self.data.timestamps[timestamp] = { # string : string : @parameter%store_network_info : @storage
            DIG 3;      # @storage : string : string : @parameter%store_network_info
            DUP;        # @storage : @storage : string : string : @parameter%store_network_info
            GET 4;      # map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            EMPTY_MAP string (map string (map string string)); # map string (map string (map string string)) : map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            EMPTY_MAP string (map string string); # map string (map string string) : map string (map string (map string string)) : map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            DUP 7;      # @parameter%store_network_info : map string (map string string) : map string (map string (map string string)) : map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            CAR;        # map string string : map string (map string string) : map string (map string (map string string)) : map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            SOME;       # option (map string string) : map string (map string string) : map string (map string (map string string)) : map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            PUSH string "network_info"; # string : option (map string string) : map string (map string string) : map string (map string (map string string)) : map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            UPDATE;     # map string (map string string) : map string (map string (map string string)) : map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            SOME;       # option (map string (map string string)) : map string (map string (map string string)) : map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            DUP 5;      # string : option (map string (map string string)) : map string (map string (map string string)) : map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            UPDATE;     # map string (map string (map string string)) : map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            SOME;       # option (map string (map string (map string string))) : map string (map string (map string (map string string))) : @storage : string : string : @parameter%store_network_info
            DIG 4;      # string : option (map string (map string (map string string))) : map string (map string (map string (map string string))) : @storage : string : @parameter%store_network_info
            UPDATE;     # map string (map string (map string (map string string))) : @storage : string : @parameter%store_network_info
            UPDATE 4;   # @storage : string : @parameter%store_network_info
            DUG 2;      # string : @parameter%store_network_info : @storage
            # self.data.latest_infor = sp.update_map( # string : @parameter%store_network_info : @storage
            DUP 3;      # @storage : string : @parameter%store_network_info : @storage
            GET 3;      # map string (map string (map string string)) : string : @parameter%store_network_info : @storage
            EMPTY_MAP string (map string string); # map string (map string string) : map string (map string (map string string)) : string : @parameter%store_network_info : @storage
            DIG 3;      # @parameter%store_network_info : map string (map string string) : map string (map string (map string string)) : string : @storage
            CAR;        # map string string : map string (map string string) : map string (map string (map string string)) : string : @storage
            SOME;       # option (map string string) : map string (map string string) : map string (map string (map string string)) : string : @storage
            PUSH string "network_info"; # string : option (map string string) : map string (map string string) : map string (map string (map string string)) : string : @storage
            UPDATE;     # map string (map string string) : map string (map string (map string string)) : string : @storage
            SOME;       # option (map string (map string string)) : map string (map string (map string string)) : string : @storage
            DIG 2;      # string : option (map string (map string string)) : map string (map string (map string string)) : @storage
            UPDATE;     # map string (map string (map string string)) : @storage
            UPDATE 3;   # @storage
          }; # @storage
      }; # @storage
    NIL operation; # list operation : @storage
    PAIR;       # pair (list operation) @storage
  };